.. include:: vars.rst

.. _section-quickstart:

***************
Getting Started
***************

.. _section-quickstart-posix:

POSIX Platforms
===============

These instructions may be used to quickly install, build, and run |RTI|
|NANO_AGENT| and |NANO_CLIENT| on Linux and Darwin.

.. _section-quickstart-posix-install:

Install and Build
-----------------

#. Clone |RTI| |NANO_AGENT|'s Git repository:

.. parsed-literal::

    git clone --recurse-submodules |link_nano_agent_git|


#. Export location of |RTI| |CONNEXT_DDS| and target build architecture
   (e.g. ``x64Linux4gcc7.3.0``). These variabels may also be passed directly
   to CMake, and they will only be read from the environment if not specified
   on the command line:

    .. code-block:: sh

        export CONNEXTDDS_DIR=/path/to/rti_connext_dds \
               CONNEXTDDS_ARCH=x64Linux4gcc7.3.0

#. Enter |RTI| |NANO_AGENT|, and create a build directory:

    .. code-block:: sh

        cd nano-agent

        mkdir build

        cd build

#. Configure build for |RTI| |NANO_AGENT| using CMake. This will include
   |RTI| |NANO_CLIENT|, and we also request the example applications to be
   included:

    .. code-block:: sh

        cmake .. -DCMAKE_INSTALL_PREFIX=../install \
                 -DENABLE_EXAMPLES=ON

#. Build and install using the native build tool (``make``):

    .. code-block:: sh

        cmake --build . --target install -- -j8


.. _section-quickstart-posix-sensor:

Run "sensor" example
--------------------

#. In a terminal, start ``nanoagentd`` with the ``sensor_agent.xml``
   configuration file:

    .. code-block:: sh

        cd nano-agent

        # -U : use UDPv4 transport
        # -a : automatically attach entities to sessions with autogenerated IDs
        # -c : load DDS entities from XML configuration
        install/bin/nanoagentd -U -a -c nano-client/resource/xml/examples/sensor_agent.xml

#. In another terminal, run ``sensor-reader-udp``:

    .. code-block:: sh

        cd nano-agent

        install/bin/examples/sensor-reader-udp

#. In another terminal, run ``sensor-writer-udp``:

    .. code-block:: sh

        cd nano-agent

        install/bin/examples/sensor-writer-udp



.. _section-quickstart-posix-shape:

Run "shape" example
--------------------

#. In a terminal, start ``nanoagentd`` with the ``shape_agent.xml``
   configuration file:

    .. code-block:: sh

        cd nano-agent

        # -U : use UDPv4 transport
        # -a : automatically attach entities to sessions with autogenerated IDs
        # -c : load DDS entities from XML configuration
        install/bin/nanoagentd -U -a -c nano-client/resource/xml/examples/shape_agent.xml

#. Start an instance of :link_connext_shapes:`RTI Shapes Demo <>`
   on Domain 0.
   
#. Subscribe to all types of shapes in *RTI Shapes Demo*.

#. In a terminal, run ``shape-writer-udp``:

    .. code-block:: sh

        cd nano-agent

        install/bin/examples/shape-writer-udp

#. Start publishing any shape in *RTI Shapes Demo*.

#. In a terminal, run ``shape-reader-udp``:

    .. code-block:: sh

        cd nano-agent

        install/bin/examples/shape-reader-udp


.. _section-quickstart-windows:

Windows
=======

These instructions may be used to quickly install, build, and run |RTI|
|NANO_AGENT| and |NANO_CLIENT| on Windows.

.. _section-quickstart-windows-install:

Install and Build
-----------------

#. Clone |RTI| |NANO_AGENT|'s Git repository. E.g. using the :link_git_windows:`Git BASH <>`
   utility:

.. parsed-literal::

    git clone --recurse-submodules |link_nano_agent_git|


#. Open a Visual Studio Developer Command Prompt (or configure a prompt using
   ``Vcvarsall.bat``, see :link_ms_cmdlinebuild:`Microsoft's documentation <>`).

#. Export location of |RTI| |CONNEXT_DDS| and target build architecture
   (e.g. ``x64Win64VS2017``). These variabels may also be passed directly
   to CMake, and they will only be read from the environment if not specified
   on the command line:

    .. code-block:: sh

        set CONNEXTDDS_DIR=C:\path\to\rti_connext_dds

        set CONNEXTDDS_ARCH=x64Win64VS2017

#. Enter |RTI| |NANO_AGENT|, and create a build directory:

    .. code-block:: sh

        cd nano-agent

        mkdir build

        cd build

#. Configure build for |RTI| |NANO_AGENT| using CMake. This will include
   |RTI| |NANO_CLIENT|, and we also request the example applications to be
   included. You might need to specify the full path to the ``cmake.exe``
   executable if it's not already part of your ``%Path%`` variable.

    .. code-block:: sh

        cmake.exe .. -DCMAKE_INSTALL_PREFIX=..\install \
                     -DENABLE_EXAMPLES=ON

#. Build and install using the command line toolchain:

    .. code-block:: sh

        cmake --build . --target install -- -j8


.. _section-quickstart-windows-sensor:

Run "sensor" example
--------------------

#. In a command prompt, start ``nanoagentd`` with the ``sensor_agent.xml``
   configuration file:

    .. code-block:: sh

        cd nano-agent

        install\bin\nanoagentd -U -a -c nano-client\resource\xml\examples\sensor_agent.xml

#. In another command prompt, run ``sensor-reader-udp``:

    .. code-block:: sh

        cd nano-agent

        install\bin\examples\sensor-reader-udp

#. In another command prompt, run ``sensor-writer-udp``:

    .. code-block:: sh

        cd nano-agent

        install\bin\examples\sensor-writer-udp


.. _section-quickstart-windows-shape:

Run "shape" example
--------------------

#. In a command prompt, start ``nanoagentd`` with the ``shape_agent.xml``
   configuration file:

    .. code-block:: sh

        cd nano-agent

        install\bin\nanoagentd -U -a -c nano-client\resource\xml\examples\shape_agent.xml

#. Start an instance of :link_connext_shapes:`RTI Shapes Demo <>`
   on Domain 0.
   
#. Subscribe to all types of shapes in *RTI Shapes Demo*.

#. In a command prompt, run ``shape-writer-udp``:

    .. code-block:: sh

        cd nano-agent

        install\bin\examples\shape-writer-udp

#. Start publishing any shape in *RTI Shapes Demo*.

#. In a terminal, run ``shape-reader-udp``:

    .. code-block:: sh

        cd nano-agent

        install\bin\examples\shape-reader-udp

